components:
  schemas:
    BlogSeo:
      type: object
      properties:
        title: { type: string, maxLength: 60 }
        description: { type: string, maxLength: 160 }
        keywords:
          type: array
          items: { type: string }
    BlogPost:
      type: object
      properties:
        id: { type: string, format: uuid }
        title: { type: string }
        slug: { type: string }
        excerpt: { type: string }
        content: { type: string }
        thumbnail: { type: string, format: uri }
        gallery:
          type: array
          items: { type: string, format: uri }
        seo: { $ref: '#/components/schemas/BlogSeo' }
        authorId: { type: string, format: uuid }
        categoryId: { type: string, format: uuid }
        tags:
          type: array
          items: { type: string }
        isPublished: { type: boolean }
        publishedAt: { type: string, format: date-time }
        createdAt: { type: string, format: date-time }
        updatedAt: { type: string, format: date-time }
    BlogCategory:
      type: object
      properties:
        id: { type: string, format: uuid }
        name: { type: string }
        slug: { type: string }
        description: { type: string }
        createdAt: { type: string, format: date-time }
        updatedAt: { type: string, format: date-time }

paths:
  /blog/posts:
    get:
      tags: [Blog - Public]
      summary: List published posts
      parameters:
        - in: query
          name: page
          schema: { type: integer, minimum: 1 }
        - in: query
          name: perPage
          schema: { type: integer, minimum: 1, maximum: 100 }
        - in: query
          name: q
          schema: { type: string }
          description: Search in title, excerpt, and content
        - in: query
          name: categoryId
          schema: { type: string }
          description: Filter by category ID
        - in: query
          name: tag
          schema: { type: string }
          description: Filter by tag name
        - in: query
          name: authorId
          schema: { type: string }
          description: Filter by author ID
        - in: query
          name: isPublished
          schema: { type: boolean }
          description: Filter by published status
      responses:
        '200':
          description: Posts fetched
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items: { $ref: '#/components/schemas/BlogPost' }
                  page: { type: integer }
                  perPage: { type: integer }
                  total: { type: integer }
  /blog/posts/{id}:
    get:
      tags: [Blog - Public]
      summary: Get post by ID
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Post fetched
          content:
            application/json:
              schema: { $ref: '#/components/schemas/BlogPost' }
        '404': { description: Not found }
  /blog/posts/slug/{slug}:
    get:
      tags: [Blog - Public]
      summary: Get post by slug
      parameters:
        - in: path
          name: slug
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Post fetched
          content:
            application/json:
              schema: { $ref: '#/components/schemas/BlogPost' }
        '404': { description: Not found }
  /blog/categories:
    get:
      tags: [Blog - Public]
      summary: List categories
      parameters:
        - in: query
          name: page
          schema: { type: integer, minimum: 1 }
        - in: query
          name: perPage
          schema: { type: integer, minimum: 1, maximum: 100 }
        - in: query
          name: q
          schema: { type: string }
          description: Search by category name
      responses:
        '200':
          description: Categories fetched
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items: { $ref: '#/components/schemas/BlogCategory' }
                  page: { type: integer }
                  perPage: { type: integer }
                  total: { type: integer }
  /blog/categories/{id}:
    get:
      tags: [Blog - Public]
      summary: Get category by ID
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Category fetched
          content:
            application/json:
              schema: { $ref: '#/components/schemas/BlogCategory' }
        '404': { description: Not found }
